input = DATA.read.split

grid   = input.map { |line| ([line] * input.size).join.split('') }
slopes = [
  [1, 1],
  [3, 1],
  [5, 1],
  [7, 1],
  [1, 2],
]

result = slopes.each_with_object({}) do |slope, memo|
  trees = 0

  (0..grid.size-1).each do |i|
    right = i * slope.first
    down  = i * slope.last

    next if down > grid.size

    trees += 1 if grid[down][right] == '#'
  end

  memo[slope] = trees
end


puts 'right 3 and down 1, how many trees would you encounter?'
puts result[[3, 1]]
# => 299

puts 'What do you get if you multiply together the number of trees encountered on each of the listed slopes?'
puts result.values.reduce(:*)
# => 3621285278


__END__
.....#....#...#.#..........#...
...#.................#.........
......#...#.#.#.....#..#.....#.
.........#.#.............##....
#..####..#..#.##.....#.........
...#........#..##...........#..
..##.#.#..#....#..#......#.#...
.......#.##....#.....###....#.#
.#..#...#......#..#....##.#....
...#...............#.#.....#...
..#............#..#.........#.#
#.#.#.............##.#......#..
#...#..............##...#.#....
...#....#................#.#..#
..#.#..#.#.#..#.....#.........#
#.............#..#..........#..
.#...#.#........###.#....#...#.
#......#....#.#..#.##..#.......
.##......###.#......#..##...#..
#..#....#........#......#.#....
.#..................#.....#.###
.#......#.#.#.....#...#.#......
....#.............#.#..........
....#..#.#........#..###.......
.....#....#...#........#.......
...........#.###....##.......#.
....#...........#.#..#...#.....
...........#.....#.#...........
.....#........#.....#.#..#....#
#.#......#.......#.......#.....
..........#.............#.#.#..
#...#..........#....#....#.....
.#.#......#..##...#.....#...##.
.#....#...#.#.......#.#........
....#....##.##...#.............
#...#....#..#.........#........
...#.....#.#...#.......#..#....
#.......#...#....##........#..#
####........#........#....#.#..
............##..........#......
.......#.....#.#.#.##..#...#...
..........#....#...##.........#
..##..####.......##......#.##..
.....#.#......##...#..#...#....
....#.#.#.........#........#...
...........###...#.........##..
.......#.#....#......#.##...##.
.................#...##.#...##.
.......#.......#..#.#..........
.#....#..#....#........#.......
...............#.##..#...##..#.
.###.#....#......#...#.#.....#.
.#.....##.......#.......#......
....#..#.....#.....#...........
.......#....#.................#
.......#.##...#...#......#.....
.#.....#...####.............#..
......#.........#..........#...
.........#....#....#........###
....#.........#......##.....#..
....#........##...##.....##...#
.#..#....#..........#...#.###.#
#..#......#...#........#.......
...#.........................#.
.............#........#........
.......#.#.#.....##.....#..#...
..##..##.........#.............
.#...#..#......#...##..##..###.
.....#....#...#...##.##........
.#.#..#...........#..#..#......
##..#...#..#...##..#....#......
...#...#...#.........#....###..
...##..#....#.#.#.......#...#..
..#.#.....#..#....#..##.......#
.....#.#.....#......#....#.#...
.......##....#.....#...#.....#.
..##..#.................#.#....
..............##....##.#..##...
.#..#.....#....#.#.#...........
......#.#.#..#..#...#.....#..##
..#.........#.#.......###...##.
#.....#...........#.....#.##.#.
#..........#....#....#..#....#.
.#.....#...#.......###......#..
....##..##......#....#....#....
.......#.#.............#....#.#
.#..#.##.##.##....#.#.....##.##
....#..##.#..#.............##..
....#...........#...#....#..#..
...........#..#....#....##.#.##
......#....#....#.....#......#.
.##.##....#.....#.#......#...#.
.....##.......#.#.#........##..
#..........##..#....#..#.#....#
...#...........................
...#..#...#..#.#.#.#.......#.#.
.....#.........#..###..........
...#.#......##....#......#..###
#..............#....#.......#..
.........##......###..###......
..#......##...........#.##.....
#.#..#......#...##.............
......#.#.............#....#..#
#.....##..#.#.................#
..##....#.....#....#.....###...
.#.#.##.....#..................
.#......#.#.#.....#..#....#....
..#.#.....##.#...#..#.#.##.....
..#.#..#......##.#.#..........#
.......##.....#..#...#....##.#.
...#.....#..........#..........
......................##......#
...###.........##.........#....
....#..................#.....#.
.##..#.............#........##.
....#....#...###..........#....
.....#.#..........###..........
..#......##......#.#.##.#..#...
##...........#.#..#.....#..#...
.........#......#..........#.#.
...#.##.#..#..###..#...........
....##.#.##...........#.....##.
....#...................###....
#.......#......#......#.....#..
#..........##..................
...#..#.#....#..#.........##.#.
......#...##.#...............#.
.........#....#.#...#..#..#....
...#......###..#......#.....#.#
#..###.#.............#.........
......#...........#............
..#..#.##.....#......#.#..#...#
.........#..............#......
........#.....#..#...#.....#..#
.....................#........#
.##.......##...#.###.........#.
.#...#.......#.#....##....#....
........#......#...........#.#.
....#......##...#.....#...#...#
..#.........#.#...............#
....#.....#......#.............
.............##.....#....#.....
........#......#.#.....#....#..
#.........#...#......#....#...#
.#........###...#.#.#...#....#.
.###...........#..#............
....##.........#..#...##.#..###
.####..#.#...............##.#..
#.....#...#....#.......##....#.
..#.....##...##.#...#..#.......
..#.###.......#.....#.......#..
...........#.......#....##....#
..#...#....##........###......#
...#..#..............#...#.....
##.#.............#....##.#..##.
##.#..#..............#.#.......
.......#....#....##............
.##..##.#..........#.#...#.#...
.........##.......##...#...#...
............#...##....#...#....
........#...#..#...#.##......#.
..#...#.#.........#.#....#.....
..#...#.#..#.......#.#.........
.......#.....#...#.#..###....#.
.#......#.#....#.#.####....#...
.......##..#......#...#......##
#####.....#........#.#.......#.
.....#...#..#...#.#.....#..#...
....#...#....##.....##....#.#..
.#..#......#.####.....#....#..#
...#.......#..#.....##........#
.#.....#.#.#.....##...#..#.....
.............#...#..#.....#....
...#.....##.......#...##..#...#
..#.............#...#..#..##...
...#........#........#...#...#.
##..........#.#.#.............#
....#....#..............#..#...
....#..####..##....#.......#.#.
.#..#.....##....#.#.....#...#..
#............##..#..#.#......#.
....#..........##..#...........
..#.##.#.......#...#.##....#...
....#.#.............#.#.##....#
...#..#.#.#......#..#....#....#
.............#...........#..#..
#.............##.......#..###..
..##....#.#.#...#...#....#...#.
##.......####........##..#.....
.###..#..#..#..#...#.#.........
............#............#.....
#...#.....#.#.##.##...#.......#
#........#....#...#.........#..
#....#.#......#.............#..
....#............#......##...#.
.......#........#..#.......#..#
#.#...#.#.#..#..#........#....#
#.#.##...........#.....#.....#.
.#...##.#..#...................
###...#.#.....................#
.#....##...##.#....#..#........
........###...#.#....##...#..##
...#..#..........###..#.......#
..#..##.............#.....#....
....##..#..............#.......
...##...##.#....#.#...#...#.#.#
..#..........#.....##........#.
.#.#.....#......#..#....#......
...##.#....#.......#......#....
...##..#........##......#..##..
#..###...#...........#.#.......
..##...#...#.#.#...#.#.....#...
..#.....##.#....#.....#..#.....
..#.#......#.......#...........
....##......##.............#..#
.......#.........##...#..#...#.
.#........#.##.#.....#.#.......
#..#...#..#.....##...........#.
..##..............#....#.......
.#..#....#.#...........#..##.#.
#....#..###..........#...#.....
.......#...##........#.#...###.
....#..#......##......#.....#..
.#..##..#..#......#......#.##..
....#.#...........#..#.#.##.#..
.....#......#.....#.....#..#...
..........#...........#...##...
#..#.#.#..#....#.....##......##
..#.....#.....#................
...#.#..##.........#..#..##....
.#.....##..#.#.#.#.....#.......
...........##...#..............
...#.#....##..#.............###
...#.#...........#.........#...
#.....#.....##..#.#.#.#....#...
##..................##.##......
......#.....#....#.....#..#...#
.............#.......#....#..##
.#..#.##..#..#.........##...#..
..#.#....#........#....#....##.
.#.#.#.#.#.......#.......#..#..
#.....#..##..#.........#.......
.............#.#..............#
.........#......#....#.#......#
.........#.#...##..#.#.........
...........#..........#........
.......#...#...#......#..#.....
#.....#...............#.....#.#
..#....#..........#.#...#..#...
#....##..#..#.....#.#..#.#.....
.#....#..###............##.....
......#.##...........#....#..#.
...#........##....#...#...#....
..#.#.#.....#..#.#..........##.
..................#...........#
##........#.#......#.#.......#.
......#..#.............##......
.#..###..#...###......#....#..#
..#...........#...#...##..#...#
..#..........#..............#..
.....#.........................
..#.#..##...........##...#.....
...........#......##.....##....
......#.......#................
.........#.......#.#...........
#......#...#........##.....##..
...#.....#....#..#.....#.......
....#.#......#...#..#.##.##...#
..#..#.#.....#...#...........#.
.#....##.####.....#..........##
...##.##.....##..###...#.......
.......#.#...#....#.......#..#.
.#..#.###.#.............#......
.###.........####..#...........
#..#.#.###.....#.......#.......
.#.....#.....#.....#.........#.
..#...#......#.......##.###....
.......##.............##.#.....
.....................#.....##.#
##.#...#........#..##........#.
...#..........#.#.#..#......###
.#....#.#.#..........##........
....#....####....#.#....#..#.#.
..#.........#....##..........##
...##.#.......##.#.......#.#...
........#..#......#...#.#.....#
.....##............#.#.......#.
.........##...##..#.....#..#...
#...#....#........#...#....##.#
..#.....#..........#...##.....#
.##..#.........#...........#...
.....##.#.#.#.#..#...#.....#.#.
.#..#..##.........#.......#...#
#....#.....#...#....#.........#
...#..#.......#.........#......
.#....##..#......##.#.#......#.
....##.##...........#...#......
..#.#....#.##...#......#.......
...#........#.............#....
...##....................#.###.
.#.......#.........#......##...
....#..#..............#....#...
....##.#............#..........
.#...#....#...##..........#....
....#............#.....#.......
.......#........#..............
....#.#....#.#..#..#...........
......................#.#......
#......##.....#..#.......##....
...#........#........#.#...##..
##.#....##....#................
#..#....#..............#.##....
......#........#...........#...
#....##.##...#...#..#...##.....
............#............#..#..
#....#...#..#..#.#...........#.
.......#..........#..........##
.....#......#....##.#..........
.#....#....#....#....#..#...#..
.....###....#...#.#.#........#.
.......#...#..........##..#...#
..##........................##.
.....#....#..............#....#
